# protoc-gen-goql

参照[protoc-gen-micro](https://github.com/micro/protoc-gen-micro)项目进行针对qeelyn项目进行的插件修改

* 支持grpc代码的生成
* 支持inject tag声明

## Install

```
go get github.com/tsingsun/protoc-gen-goql
```

Also required: 

- [protoc](https://github.com/google/protobuf)
- [protoc-gen-go](https://github.com/golang/protobuf)

## Usage

Define your service as `greeter.proto`

```
syntax = "proto3";

service Greeter {
	rpc Hello(Request) returns (Response) {}
}

message Request {
    // @inject_tag: valid:"ip" gorm:"foreignkey:UserRefer"
	string name = 1;
}

message Response {
	string msg = 1;
}
```

Generate the code

```
protoc --goql_out=plugins=gprc:. testdata/greeter/greeter.proto
protoc --proto_path=$GOPATH/src:. --goql_out=. greeter.proto
```

Your output result should be:

```
./
    greeter.proto	# original protobuf file
    greeter.pb.go	# auto-generated by protoc-gen-go
```
in greeter.pb.go ,the reject tag will be generate 
``` 
    // @inject_tag: valid:"ip" gorm:"foreignkey:UserRefer"
	Name   string    `protobuf:"bytes,1,opt,name=name" json:"name,omitempty" valid:"ip" gorm:"foreignkey:UserRefer"`
```

### inject tag 格式为 
```
// @inject_tag: {key}:"{value}"
```
 